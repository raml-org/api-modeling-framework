<!DOCTYPE html>
<div id="navigator" class="imported">
    <div class="tabs">
        <ul>
            <li data-bind="click: () => { navigatorSection('files') },
                           css: {'is-active': navigatorSection() === 'files'}">
                <a>Files</a>
            </li>
            <li data-bind="click: () => { navigatorSection('logic') },
                           css: {'is-active': navigatorSection() === 'logic'}">
                <a>Modular Units</a>
            </li>
            <li data-bind="click: () => { navigatorSection('domain') },
                           css: {'is-active': navigatorSection() === 'domain'}">
                <a>Domain</a>
            </li>
        </ul>
    </div>
    <aside data-bind="visible: navigatorSection()==='files'"
           class="menu" id="files-navigator">
        <p class="menu-label" data-bind="if: references && references.length">FILES</p>
        <ul class="menu-list" data-bind="foreach: references">
            <li data-bind="click: $parent.selectNavigatorFile.bind($parent)">
                <span class="icon is-small pull-left" style="margin-right: 5px; margin-top: 10px; margin-left: 15px">
                    <i class="fa fa-file-text-o"></i>
                </span>
                <a href="#" data-bind="text: $data.label,
                                       css: {'is-active': $parent.selectedReference() && $parent.selectedReference().id === $data.id}"></a>
            </li>
        </ul>

    </aside>

    <aside  data-bind="visible: navigatorSection()==='logic'"
            class="menu" id="modules-navigator">
        <p class="menu-label" data-bind="if: documentUnits && documentUnits.length">DOCUMENTS</p>
        <ul class="menu-list" data-bind="foreach: documentUnits">
            <li data-bind="click: $parent.selectNavigatorFile.bind($parent)">
                <span class="icon is-small pull-left" style="margin-right: 5px; margin-top: 10px; margin-left: 15px">
                    <i data-bind="attr: { class: $parent.ui.iconClassForUnit($data) }"></i>
                </span>
                <a data-bind="text: label,
                              css: {'is-active': $parent.selectedReference() && $parent.selectedReference().id === id}"></a>
                <p data-bind="if: $parent.selectedReference() && $parent.selectedReference().id === id && declares && declares.length" class="menu-label submenu-label">Declares</p>
                <span data-bind="if: $parent.selectedReference() && $parent.selectedReference().id === id">
                    <ul data-bind="foreach: declares"
                        class="menu-list"
                        style="margin-left: 15px">
                        <li classs="navigator-item">
                            <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 3px">
                                <i data-bind="attr: { class: viewModel.ui.iconClassForDomainUnit($data) }"></i>
                            </span>
                            <a href="#" data-bind="text: $data.label,
                                                   click: function(){ (viewModel.selectUnitDeclaration.bind(viewModel))($data) },
                                                   clickBubble: false"></a>
                        </li>
                    </ul>
                </span>
                <p data-bind="if: $parent.selectedReference() && $parent.selectedReference().id === id && encodes" class="menu-label submenu-label">Encodes</p>
                <ul data-bind="if: $parent.selectedReference() && $parent.selectedReference().id === id && encodes" class="menu-list" style="margin-left: 15px">
                    <li>
                        <span class="icon is-small pull-left" style="margin-right: 5px; margin-top: 3px">
                            <i data-bind="attr: { class: viewModel.ui.iconClassForDomainUnit(encodes) }"></i>
                        </span>
                        <p data-bind="text: encodes.label"></p>
                    </li>
                </ul>
                <p data-bind="if: $parent.selectedReference() && $parent.selectedReference().id === id && references && references.length" class="menu-label submenu-label">References</p>
                <span data-bind="if: $parent.selectedReference() && $parent.selectedReference().id === id">
                    <ul data-bind="foreach: references"
                        class="menu-list"
                        style="margin-left: 15px">
                        <li>
                            <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 3px">
                                <i data-bind="attr: { class: viewModel.ui.iconClassForUnit($data) }"></i>
                            </span>
                            <p data-bind="text: $data.label"></p>
                        </li>
                    </ul>
                </span>
            </li>
        </ul>
        <p class="menu-label" data-bind="if: fragmentUnits && fragmentUnits.length">FRAGMENTS</p>
        <ul class="menu-list" data-bind="foreach: fragmentUnits">
            <li data-bind="click: $parent.selectNavigatorFile.bind($parent)">
                <span class="icon is-small pull-left" style="margin-right: 5px; margin-top: 10px; margin-left: 15px">
                    <i data-bind="attr: { class: $parent.ui.iconClassForUnit($data) }"></i>
                </span>
                <a data-bind="text: label,
                              css: {'is-active': $parent.selectedReference() && $parent.selectedReference().id === id}"></a>
                <p data-bind="if: $parent.selectedReference() && $parent.selectedReference().id === id && $data.encodes" class="menu-label submenu-label">Encodes</p>
                <ul data-bind="if: $parent.selectedReference() && $parent.selectedReference().id === id && $data.encodes" class="menu-list" style="margin-left: 15px">
                    <li class="navigator-item">
                        <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 3px">
                            <i data-bind="attr: { class: viewModel.ui.iconClassForDomainUnit($data.encodes) }"></i>
                        </span>
                        <p data-bind="text: $data.encodes.label"></p>
                    </li>
                </ul>
                <p data-bind="if: $parent.selectedReference() && $parent.selectedReference().id === id && references && references.length" class="menu-label submenu-label">References</p>
                <span data-bind="if: $parent.selectedReference() && $parent.selectedReference().id === id">
                    <ul data-bind="foreach: references"
                        class="menu-list"
                        style="margin-left: 15px">
                        <li class="navigator-item">
                            <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 3px">
                                <i data-bind="attr: { class: viewModel.ui.iconClassForUnit($data) }"></i>
                            </span>
                            <p data-bind="text: $data.label"></p>
                        </li>
                    </ul>
                </span>
            </li>
        </ul>
        <p class="menu-label" data-bind="if: moduleUnits && moduleUnits.length">MODULES</p>
        <ul class="menu-list" data-bind="foreach: moduleUnits">
            <span class="icon is-small pull-left" style="margin-right: 5px; margin-top: 10px; margin-left: 15px">
                <i data-bind="attr: { class: $parent.ui.iconClassForUnit($data) }"></i>
            </span>
            <li data-bind="click: $parent.selectNavigatorFile.bind($parent)">
                <a data-bind="text: label,
                              css: {'is-active': $parent.selectedReference().id === id}"></a>
                <p data-bind="if: $parent.selectedReference() && $parent.selectedReference().id === id && declares && declares.length" class="menu-label submenu-label">Declares</p>
                <span data-bind="if: $parent.selectedReference() && $parent.selectedReference().id === id">
                    <ul data-bind="foreach: declares"
                        class="menu-list"
                        style="margin-left: 15px">
                        <li class="navigator-item">
                            <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 3px">
                                <i data-bind="attr: { class: viewModel.ui.iconClassForDomainUnit($data) }"></i>
                            </span>
                            <a href="#" data-bind="text: $data.label,
                                                   click: function(){ (viewModel.selectUnitDeclaration.bind(viewModel))($data) },
                                                   clickBubble: false"></a>
                        </li>
                    </ul>
                </span>
                <p data-bind="if: $parent.selectedReference() && $parent.selectedReference().id === id && references && references.length" class="menu-label submenu-label">References</p>
                <span data-bind="if: $parent.selectedReference() && $parent.selectedReference().id === id">
                    <ul data-bind="foreach: references"
                        class="menu-list"
                        style="margin-left: 15px">
                        <li class="navigator-item">
                            <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 3px">
                                <i data-bind="attr: { class: viewModel.ui.iconClassForUnit($data) }"></i>
                            </span>
                            <!-- <p data-bind="text: JSON.stringify(references)></p> -->
                            <p data-bind="text: $data.label"></p>
                        </li>
                    </ul>
                </span>
            </li>
        </ul>
    </aside>

    <aside data-bind="visible: navigatorSection()==='domain'"
           class="menu" id="domain-navigator">
        <!-- ko with: domainUnits()['APIDocumentation'] -->
        <p class="menu-label" data-bind="if: $data && $data.length">API Documentation</p>
        <ul class="menu-list" data-bind="foreach: $data">
            <li class="navigator-item">
                <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 10px">
                    <i data-bind="attr: { class: viewModel.ui.iconClassForDomainRDFUnit($data) }"></i>
                </span>
                <a href="#" data-bind="text: viewModel.ui.labelForDomainUnit($data),
                                       click: function(){ (viewModel.expandDomainUnit.bind(viewModel))($data) },
                                       css: {'is-active': viewModel.focusedId() === $data.id || $data.id.indexOf(viewModel.focusedId()) === 0}"></a>
                <span data-bind="if: $data.expanded && $data.endpoints && $data.endpoints.length > 0">
                    <p class="menu-label submenu-label">Endpoints</p>
                    <ul data-bind="foreach: $data.endpoints">
                        <li class="navigator-item">
                            <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 10px">
                                <i data-bind="attr: { class: viewModel.ui.iconClassForDomainRDFUnit($data) }"></i>
                            </span>
                            <a href="#" data-bind="text: viewModel.ui.labelForDomainUnit($data),
                                                   click: function(){ (viewModel.expandDomainUnit.bind(viewModel))($data) },
                                                   css: {'is-active': viewModel.focusedId() === $data.id}"></a>
                            <span data-bind="template: {name: 'operations-template', data: $data}"></span>
                        </li>
                    </ul>
                </span>
            </li>
        </ul>
        <!-- /ko -->
        <!-- ko with: domainUnits()['EndPoint'] -->
        <p class="menu-label" data-bind="if: $data && $data.length">End Points</p>
        <ul class="menu-list" data-bind="foreach: $data">
            <li class="navigator-item">
                <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 10px">
                    <i data-bind="attr: { class: viewModel.ui.iconClassForDomainRDFUnit($data) }"></i>
                </span>
                <a href="#" data-bind="text: viewModel.ui.labelForDomainUnit($data),
                                       click: function(){ (viewModel.expandDomainUnit.bind(viewModel))($data) },
                                       css: {'is-active': viewModel.focusedId() === $data.id}"></a>
                <span data-bind="template: {name: 'operations-template', data: $data}"></span>
            </li>
        </ul>
        <!-- /ko -->
        <!-- ko with: domainUnits()['Operation'] -->
        <p class="menu-label" data-bind="if: $data && $data.length">Operations</p>
        <ul class="menu-list" data-bind="foreach: $data">
            <li class="navigator-item">
                <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 10px">
                    <i data-bind="attr: { class: viewModel.ui.iconClassForDomainRDFUnit($data) }"></i>
                </span>
                <a href="#" data-bind="text: viewModel.ui.labelForDomainUnit($data),
                                       click: function(){ (viewModel.expandDomainUnit.bind(viewModel))($data) },
                                       css: {'is-active': viewModel.focusedId() === $data.id}"></a>
                <span data-bind="template: {name: 'responses-template', data: $data}"></span>
                <span data-bind="template: {name: 'requests-template', data: $data}"></span>
            </li>
        </ul>
        <!-- /ko -->
        <!-- ko with: domainUnits()['Response'] -->
        <p class="menu-label" data-bind="if: $data && $data.length">Responses</p>
        <ul class="menu-list" data-bind="foreach: $data">
            <li class="navigator-item">
                <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 10px">
                    <i data-bind="attr: { class: viewModel.ui.iconClassForDomainRDFUnit($data) }"></i>
                </span>
                <a href="#" data-bind="text: viewModel.ui.labelForDomainUnit($data),
                                       click: function(){ (viewModel.expandDomainUnit.bind(viewModel))($data) },
                                       css: {'is-active': viewModel.focusedId() === $data.id}"></a>
                <span data-bind="template: {name: 'payload-template', data: $data}"></span>
            </li>
        </ul>
        <!-- /ko -->
        <!-- ko with: domainUnits()['Payload'] -->
        <p class="menu-label" data-bind="if: $data && $data.length">Payloads</p>
        <ul class="menu-list" data-bind="foreach: $data">
            <li class="navigator-item"
                data-bind="css: {'is-active': viewModel.focusedId() === $data.id}">
                <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 10px">
                    <i data-bind="attr: { class: viewModel.ui.iconClassForDomainRDFUnit($data) }"></i>
                </span>
                <a href="#" data-bind="text: viewModel.ui.labelForDomainUnit($data),
                                       click: function(){ (viewModel.expandDomainUnit.bind(viewModel))($data) }"></a>
            </li>
        </ul>
        <!-- /ko -->
    </aside>
    <!-- templates -->
    <script type="text/html" id="schema-template">
        <span data-bind="if: ($data.schema && $data.expanded)">
            <p class="menu-label submenu-label imported">Schema</p>
            <ul>
                <li class="navigator-item">
                    <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 10px">
                        <i data-bind="attr: { class: viewModel.ui.iconClassForDomainRDFUnit($data.schema) }"></i>
                    </span>
                    <a href="#" data-bind="text: viewModel.ui.labelForDomainUnit($data.schema),
                                           css: {'is-active': viewModel.focusedId() === $data.schema.id}"></a>
                </li>
            </ul>
        </span>
    </script>

    <script type="text/html" id="payload-template">
        <span data-bind="if: ($data.payloads && $data.expanded && $data.payloads.length > 0)">
            <p class="menu-label submenu-label imported">Payloads</p>
            <ul data-bind="foreach: $data.payloads">
                <li class="navigator-item">
                    <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 10px">
                        <i data-bind="attr: { class: viewModel.ui.iconClassForDomainRDFUnit($data) }"></i>
                    </span>
                    <a href="#" data-bind="text: viewModel.ui.labelForDomainUnit($data),
                                           click: function(){ (viewModel.expandDomainUnit.bind(viewModel))($data) },
                                           css: {'is-active': viewModel.focusedId() === $data.id}"></a>
                    <span data-bind="template: {name: 'schema-template', data: $data}"></span>
                </li>
            </ul>
        </span>
    </script>

    <script type="text/html" id="responses-template">
        <span data-bind="if: $data.expanded && $data.responses && $data.responses.length > 0">
            <p class="menu-label submenu-label">Returns</p>
            <ul data-bind="foreach: $data.responses">
                <li class="navigator-item">
                    <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 10px">
                        <i data-bind="attr: { class: viewModel.ui.iconClassForDomainRDFUnit($data) }"></i>
                    </span>
                    <a href="#" data-bind="text: viewModel.ui.labelForDomainUnit($data),
                                           click: function(){ (viewModel.expandDomainUnit.bind(viewModel))($data) },
                                           css: {'is-active': viewModel.focusedId() === $data.id}"></a>
                    <span data-bind="template: {name: 'payload-template', data: $data}"></span>
                </li>
            </ul>
        </span>
    </script>

    <script type="text/html" id="requests-template">
        <span data-bind="if: $data.expanded && $data.requests && $data.requests.length > 0">
            <p class="menu-label submenu-label">Expects</p>
            <ul data-bind="foreach: $data.requests">
                <li class="navigator-item">
                    <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 10px">
                        <i data-bind="attr: { class: viewModel.ui.iconClassForDomainRDFUnit($data) }"></i>
                    </span>
                    <a href="#" data-bind="text: viewModel.ui.labelForDomainUnit($data),
                                           click: function(){ (viewModel.expandDomainUnit.bind(viewModel))($data) },
                                           css: {'is-active': viewModel.focusedId() === $data.id}"></a>
                    <span data-bind="template: {name: 'payload-template', data: $data}"></span>
                </li>
            </ul>
        </span>
    </script>

    <script type="text/html" id="operations-template">
        <span data-bind="if: $data.expanded && $data.operations && $data.operations.length > 0">
            <p class="menu-label submenu-label">Supported Operations</p>
            <ul data-bind="foreach: $data.operations">
                <li class="navigator-item">
                    <span class="icon is-small pull-left" style="margin-right: 10px; margin-top: 10px">
                        <i data-bind="attr: { class: viewModel.ui.iconClassForDomainRDFUnit($data) }"></i>
                    </span>
                    <a href="#" data-bind="text: viewModel.ui.labelForDomainUnit($data),
                                           click: function(){ (viewModel.expandDomainUnit.bind(viewModel))($data) },
                                           css: {'is-active': viewModel.focusedId() === $data.id}"></a>
                    <span data-bind="template: {name: 'requests-template', data: $data}"></span>
                    <span data-bind="template: {name: 'responses-template', data: $data}"></span>
                </li>
            </ul>
        </span>
    </script>
</div>